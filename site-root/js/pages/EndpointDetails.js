Ext.define("Site.page.EndpointDetails",{singleton:true,constructor:function(){var a=this;Ext.onReady(a.onDocReady,a)},onDocReady:function(){var b=this,a=b.docsCt=Ext.get("endpoint-docs"),c=b.uploadForm=a.down(".swagger-uploader");Ext.select(".col-options",true).on("click",function(f,e){var d=Ext.get(e);d.radioCls("selected");d.up("table").toggleCls("query-expand")},null,{delegate:".col-option"});if(c){a.on({scope:b,dragover:b.onDocsDragOver,dragleave:b.onDocsDragLeave,drop:b.onDocsDrop})}},onDocsDragOver:function(b,a){b.stopEvent();b.browserEvent.dataTransfer.dropEffect="copy";this.docsCt.addCls("file-drag-over")},onDocsDragLeave:function(b,a){this.docsCt.removeCls("file-drag-over")},onDocsDrop:function(e,c){var d=this,b=d.docsCt,f=new XMLHttpRequest(),a=e.event.dataTransfer.files[0];e.stopEvent();b.removeCls("file-drag-over");if(!a.name.match(/\.ya?ml$/)){window.alert("Dropped file must end with .yaml");return}b.addCls("uploading");f.open("PUT",d.uploadForm.dom.action);f.onload=Ext.bind(d.onDocsUploadFinished,d);f.send(a)},onDocsUploadFinished:function(a){this.docsCt.removeCls("uploading");if(a.currentTarget.status==201||a.currentTarget.status==204){window.alert("Upload successful!");location.reload()}else{window.alert("Failed to upload file")}}});